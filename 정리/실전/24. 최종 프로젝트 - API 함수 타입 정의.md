# 최종 프로젝트 - API 함수 타입 정의

## API 함수 타입 정의 안내

### fetchCovidSummary()

```typescript
function fetchCovidSummary() {
  const url = 'https://api.covid19api.com/summary';
  return axios.get(url);
}
```

현재 해당 메소드를 사용하는 곳을 가보면, 타입이 any로 되어있다.

index.html에서 live server를 실행시켜보자.(app.js위치에 built폴더 추가.)

![start-screen](./readme_images/24_start-screen.png)



## 전세계 코로나 요약 정보 API 함수 반환 타입 정의

반환타입은 axios.get()의 반환 결과가 될 것이다.

타입 추론에 의해 fetchCovidSummary에 마우스를 올려보면 `Promise<AxiosResponse<any>>`가 추론되는 걸 볼 수 있다.

우리가 정할 것은 any에 들어갈 타입이다.

개발자 도구에서 fetchSummary가 어떻게 넘어 가는지 보자.

![fetchSummary-preview](./readme_images/24_fetchSummary-preview.png)



```json
// data의 형태
Countries: [{ID: "c314ef66-2581-49ca-ae97-4aff742ab3ee", Country: "Afghanistan", CountryCode: "AF",…},…]
    [0 … 99]
    [100 … 193]
Date: "2022-02-14T10:35:17.383Z"
Global: {NewConfirmed: 742188, TotalConfirmed: 411117686, NewDeaths: 3002, TotalDeaths: 5811650,…}
  Date: "2022-02-14T10:35:17.383Z"
  NewConfirmed: 742188
  NewDeaths: 3002
  NewRecovered: 0
  TotalConfirmed: 411117686
  TotalDeaths: 5811650
  TotalRecovered: 0
  ID: "547d6550-9d51-459d-9330-496fb8f18a4f"
Message: ""
```



interface를 만들어 타입정의해보자.

```typescript
interface CovidSummaryResponse{
  Countries: any[];
  Date: string;
  Global: any;
  Message: string;
}
```

```typescript
function fetchCovidSummary(): Promise<AxiosResponse<CovidSummaryResponse>> {
  const url = 'https://api.covid19api.com/summary';
  return axios.get(url);
}
```

선언해주고 나면, 타입추론이 되는 것을 볼 수있다.

![fetch-type-inference](./readme_images/24_fetch-type-inference.png)



## 전세계 코로나 요약 정보 API 함수 반환 타입 모듈화 및 구체화

타입을 위로 바로쓰게되면 타입정의 하는 코드가 더 많아질 것이다.

타입정의 코드와 로직 코드를 구분해보자.

covid폴더를 만들어 타입정의를 해놓을 파일 index.ts를 만들고 아까 작성한 인터페이스를 그대로 옮기자.

```typescript
// index.ts
export interface CovidSummaryResponse {
  Countries: any[];
  Date: string;
  Global: any;
  Message: string;
}
```

넘어온 데이터를 토대로 인터페이스를 만들어 타입정의를 해보자.

```typescript
// 타입들을 모아놓은 파일.
interface Country {
  Country: string;
  CountryCode: string;
  Date: string;
  NewConfirmed: number;
  NewDeaths: number;
  Premium: any;
  Slug: string;
  TotalConfirmed: number;
  TotalDeaths: number;
  TotalRecovered: number;
}

interface Global {
  NewConfirmed: number;
  NewDeaths: number;
  NewRecovered: number;
  TotalConfirmed: number;
  TotalDeaths: number;
  TotalRecovered: number;
}

export interface CovidSummaryResponse {
  Countries: Country[];
  Date: string;
  Global: Global;
  Message: string;
}
```



## 국가별 코로나 정보 API 함수 타입 정의 방법 실습 안내

fetchCountryInfo에 타입을 추가할 건데 먼저 initEvents를 살펴보자.

목록에서 아무거나 클릭해보면 호출된 것을 볼 수 있다.

이것을 보고 api의 반환타입들을 정의하는 실습을 진행해보자.